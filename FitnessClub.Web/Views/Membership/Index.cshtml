@model FitnessClub.Web.ViewModels.MembershipViewModel
@{
    ViewData["Title"] = "Абонементи";
}

<section class="hero" style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('../img/membership-bg.jpg'); background-size: cover; background-position: center;">
    <div class="hero-content">
        <h1>Наші Абонементи</h1>
        <p>Оберіть найкращий план для ваших тренувань</p>
    </div>
</section>

<section class="section">
    <div class="container">
        <h2 class="section-title">Доступні типи абонементів</h2>
        
        @if (TempData["ErrorMessage"] != null)
        {
            <div class="alert alert-danger" role="alert">
                @TempData["ErrorMessage"]
            </div>
        }
        @if (TempData["SuccessMessage"] != null)
        {
             <div class="alert alert-success" role="alert">
                 @TempData["SuccessMessage"]
            </div>
        }
        
         @if (Model.ActiveMembership != null)
        {
             <div class="card mb-4 bg-light">
                 <div class="card-header">Ваш активний абонемент</div>
                 <div class="card-body">
                     <h5 class="card-title">@Model.ActiveMembership.MembershipTypeName</h5>
                     <p class="card-text">Дійсний до: @Model.ActiveMembership.EndDate.ToString("dd.MM.yyyy")</p>
                     @if (!string.IsNullOrEmpty(Model.ActiveMembership.ClubName))
                    {
                         <p class="card-text">Клуб: @Model.ActiveMembership.ClubName</p>
                    }
                 </div>
            </div>
        }
        
        @if (!Model.MembershipTypes.Any())
        {
            <p>На даний момент немає доступних типів абонементів.</p>
        }
        else
        {
            <div class="row">
                @foreach (var type in Model.MembershipTypes)
                {
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 shadow-sm">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">@type.Name</h5>
                                <p class="card-text text-muted">@type.Description</p>
                                <ul class="list-unstyled mt-3 mb-4">
                                  <li>Ціна: <strong class="fs-5">@type.Price.ToString("C")</strong></li>
                                  <li>Тривалість: @type.DurationDays днів</li>
                                </ul>
                                <div class="mt-auto">
                                    @if (User.Identity?.IsAuthenticated ?? false)
                                    {
                                        <a asp-action="Purchase" asp-route-id="@type.MembershipTypeId" class="btn btn-primary w-100">Придбати</a>
                                    }
                                    else
                                    {
                                        var returnUrl = Url.Action("Index", "Membership"); 
                                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="@returnUrl" class="btn btn-secondary w-100">Увійдіть щоб придбати</a>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</section>

<section class="section" style="background-color: var(--primary-light);">
    <div class="container">
        <h2 class="section-title">Додаткові опції</h2>
        
        <div class="card-grid">
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title">Персональний тренер</h3>
                    <p class="card-text">Додайте персональні тренування з нашими професійними тренерами.</p>
                    <div class="plan-price">300<span> грн/заняття</span></div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title">Заморозка абонемента</h3>
                    <p class="card-text">Можливість призупинити дію абонемента на період до 30 днів.</p>
                    <div class="plan-price">100<span> грн</span></div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="section">
    <div class="container">
        <h2 class="section-title">Поширені запитання</h2>
        
        <div style="max-width: 800px; margin: 0 auto;">
            <div style="margin-bottom: 20px;">
                <h3>Чи можна заморозити абонемент?</h3>
                <p>Так, заморозка абонемента доступна для всіх типів абонементів за додаткову плату.</p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <h3>Як відбувається оплата?</h3>
                <p>Оплату можна здійснити готівкою або банківською карткою в будь-якому з наших клубів, а також онлайн через особистий кабінет.</p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <h3>Чи можна відвідувати різні клуби мережі?</h3>
                <p>Відвідування різних клубів мережі доступне для власників абонемента "Мережевий".</p>
            </div>
            
            <div style="margin-bottom: 20px;">
                <h3>Як записатися на групове заняття?</h3>
                <p>Запис на групові заняття доступний через особистий кабінет на сайті або на рецепції клубу.</p>
            </div>
        </div>
    </div>
</section>